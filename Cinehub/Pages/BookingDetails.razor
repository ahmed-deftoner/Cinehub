@page "/bookingDetails"
@using Syncfusion.Blazor.Cards
@using Syncfusion.Blazor.Buttons
@inject Microsoft.JSInterop.IJSRuntime JS
@using System.IO
@using BlazorDemos.Data.FileFormats.PDF
@inject Microsoft.AspNetCore.Hosting.IWebHostEnvironment hostingEnvironment

<section class="bg">
    <div class="container-fluid my-5">
        @{
            int i=0;
        }
        @foreach (var item in movies)
        {
            <div class="my-3">
                <MovieTile movie=item id=bookingId[i]></MovieTile>
            </div>
            i=i+1;
        }
    </div>
</section>

<style>
    .bg{
        background-color: black
    }
    section {
        position: relative;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 400px;
      }

      img{
        max-width: 100%;
        max-height: 100%;
        display: block; /* remove extra space below image */
    }
   .overlay-bg{
    background: rgb(9,8,14);
background: linear-gradient(270deg, rgba(9,8,14,1) 77%, rgba(9,8,14,0.34544240059304976) 98%, rgba(9,8,14,0.3) 100%);
   }
    .h5-rating{
        font-size:1rem;
        font-weight:500
    }
    .mybtn{
        border-radius:20%;
        border-width:2px;
        border-color:#93F9B9
    }

    .genre{
        font-family:'Lucida Sans';
        font-size:18px;
        font-weight:500;
    }

    .viewerRating{
        font-family:'Segoe UI';
        font-size:18px;
        font-weight:700;
        color:gray;
    }
    </style>

@code {
    /// <summary>
    /// Create and download the simple PDF document
    ///<summary>
    public CinehubService cinheubService{ get; set; }
    public List<int> bookingId;
    public List<Movie> movies;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        cinheubService = new CinehubService();
        bookingId = cinheubService.getBookingId("ahmed_deftoner");
        movies = cinheubService.GetMovies("ahmed_deftoner");
    }

    protected async void ImageInsertionPDF(MouseEventArgs args)
    {	   
        ImageInsertionService service = new ImageInsertionService(hostingEnvironment);
        MemoryStream documentStream = service.ImageInsertionPDF();
        await JS.SaveAs("ImageInsertion.pdf", documentStream.ToArray());
    }
}
